<odoo>

<!--    <record model="ir.actions.server" id="action_update_records_account_move">-->
<!--        <field name="name">Efficy : Update Invoices from Mapping model</field>-->
<!--        <field name="model_id" ref="account.model_account_move"/>-->
<!--        <field name="state">code</field>-->
<!--        <field name="code">-->
<!--            records.efficy_sync()-->
<!--        </field>-->
<!--    </record>-->

<!--    <record model="ir.actions.server" id="action_update_records_res_partner">-->
<!--        <field name="name">Efficy: Update Partners from Mapping model</field>-->
<!--        <field name="model_id" ref="base.model_res_partner"/>-->
<!--        <field name="state">code</field>-->
<!--        <field name="code">-->
<!--            records.efficy_sync()-->
<!--        </field>-->
<!--    </record>-->

    <record model="ir.actions.server" id="action_efficy_sync_move_with_lines">
        <field name="name">Efficy: sync moves with lines</field>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="state">code</field>
        <field name="code">
            records.get_moves_with_lines()
        </field>
    </record>

    <record model="ir.actions.server" id="action_efficy_sync_entity_one">
        <field name="name">Efficy: sync entity one</field>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="state">code</field>
        <field name="code">
            records.sync_entity_one()
        </field>
    </record>

    <record id="ir_cron_efficy_sync_move_with_lines" model="ir.cron">
        <field name="name">Efficy: sync moves with lines</field>
        <field name="interval_number">1</field>
        <field name="interval_type">days</field>
        <field name="numbercall">-1</field>
        <field name="active" eval="False"/>
        <field name="nextcall" eval="(DateTime.now().replace(hour=2, minute=0) + timedelta(days=1)).strftime('%Y-%m-%d %H:%M:%S')" />
        <field name="doall" eval="False"/>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="code">
#date_from = env.company.efficy_last_sync_date
date_from = datetime.datetime(2021, 3, 31)
date_to = datetime.datetime(2021, 4, 30)
model.get_moves_with_lines(date_from=date_from, date_to=date_to)
        </field>
        <field name="state">code</field>
    </record>

    <record model="ir.actions.server" id="action_efficy_account_move_run_query">
        <field name="name">Efficy: run query</field>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="state">code</field>
        <field name="code">
            records.run_query()
        </field>
    </record>

    <record model="ir.actions.server" id="action_efficy_res_partner_run_query">
        <field name="name">Efficy: run query company</field>
        <field name="model_id" ref="account.model_res_partner"/>
        <field name="state">code</field>
        <field name="code">
            records.run_query()
        </field>
    </record>

    <record model="ir.actions.server" id="action_efficy_account_move_run_query_attachment">
        <field name="name">Efficy: run query attachment only</field>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="state">code</field>
        <field name="code">
            records.run_query(company=False, document=False, relation=False, file=True)
        </field>
    </record>

    <record id="ir_cron_efficy_run_query" model="ir.cron">
        <field name="name">Efficy: run query</field>
        <field name="interval_number">1</field>
        <field name="interval_type">days</field>
        <field name="numbercall">-1</field>
        <field name="active" eval="False"/>
        <field name="nextcall" eval="(DateTime.now().replace(hour=2, minute=0) + timedelta(days=1)).strftime('%Y-%m-%d %H:%M:%S')" />
        <field name="doall" eval="False"/>
        <field name="model_id" ref="account.model_account_move"/>
        <field name="code">
            model.run_query(date_from=env.company.efficy_last_sync_date)
        </field>
        <field name="state">code</field>
    </record>

<!--    <record id="ir_cron_efficy_sync_move_with_lines_skip" model="ir.cron">-->
<!--        <field name="name">Efficy sync moves with lines (Skip existing)</field>-->
<!--        <field name="interval_number">1</field>-->
<!--        <field name="interval_type">days</field>-->
<!--        <field name="numbercall">-1</field>-->
<!--        <field name="active" eval="False"/>-->
<!--        <field name="nextcall" eval="(DateTime.now().replace(hour=2, minute=0) + timedelta(days=1)).strftime('%Y-%m-%d %H:%M:%S')" />-->
<!--        <field name="doall" eval="False"/>-->
<!--        <field name="model_id" ref="account.model_account_move"/>-->
<!--        <field name="code">-->
<!--            model.get_moves_with_lines(date_from=env.company.efficy_last_sync_date, noupdate=True)-->
<!--        </field>-->
<!--        <field name="state">code</field>-->
<!--    </record>-->

</odoo>
